<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Avyav Chess</title>

  <!-- Orbitron font -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --cyan: #00ccff; /* bright cyan */
      --bg: #000000;
      --yt-red: #FF0000;
    }

    *{box-sizing:border-box}
    html,body{
      height:100%;
      margin:0;
      background:var(--bg);
      font-family:'Orbitron', sans-serif;
      color:var(--cyan);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* wrapper keeps footer from overlapping */
    .wrapper{
      min-height:100%;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      position:relative;
      padding-bottom:80px; /* room for footer */
    }

    /* Title */
    #title {
      position:absolute;
      top:50%;
      left:50%;
      transform:translate(-50%,-50%);
      font-size:4rem;
      color:var(--cyan);
      /* no fuzzy glow, keep sharp color */
      text-shadow: 0 0 1px var(--cyan);
      opacity:0;
      animation: titleFadeIn 1.6s ease forwards, titleMove 2s ease 1.8s forwards;
      will-change: transform, top, left, font-size;
      z-index:5;
      white-space:nowrap;
    }

    @keyframes titleFadeIn {
      from{opacity:0;}
      to{opacity:1;}
    }

    @keyframes titleMove {
      from{ top:50%; left:50%; transform:translate(-50%,-50%); font-size:4rem; }
      to{ top:22px; left:28px; transform:translate(0,0); font-size:1.6rem; }
    }

    /* center column for intro text + button */
    .center-area{
      width:100%;
      max-width:900px;
      padding: 0 20px;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap:18px;
      pointer-events:none;
      margin-top:40px;
    }

    /* Intro typing text: above button */
    #introText {
      color:var(--cyan);
      font-size:1.05rem;
      line-height:1.45;
      text-align:center;
      max-width:820px;
      width:100%;
      opacity:0;
      white-space:pre-wrap;
      border-right: 2px solid var(--cyan);
      padding-right:6px;
      box-sizing:border-box;
      transition:opacity .35s ease;
      pointer-events:auto;
      text-shadow: 0 0 1px var(--cyan);
    }
    #introText.visible { opacity:1; }
    #introText.done { border-right: none; }

    /* Get Started button - hidden until typing done */
    #getStarted {
      pointer-events:auto;
      opacity:0;
      transform:translateY(8px);
      transition: all .35s ease;
      border:2px solid var(--cyan);
      background:transparent;
      color:var(--cyan);
      padding:12px 36px;
      font-size:1rem;
      border-radius:8px;
      cursor:pointer;
      text-shadow: 0 0 1px var(--cyan);
      box-shadow: inset 0 0 4px rgba(0,204,255,0.08), 0 0 4px rgba(0,204,255,0.04);
    }
    #getStarted.show {
      opacity:1;
      transform:translateY(0);
    }
    #getStarted:hover{
      background:var(--cyan);
      color:#000;
      box-shadow: 0 0 10px var(--cyan);
      transform:scale(1.02);
    }

    /* Coming soon section */
    #coming {
      display:none;
      color:var(--cyan);
      text-align:center;
      padding-top:110px;
      font-size:1.6rem;
    }

    /* Footer with YouTube subscribe */
    footer{
      position:fixed;
      bottom:10px;
      left:0;
      width:100%;
      display:flex;
      justify-content:center;
      align-items:center;
      gap:10px;
      pointer-events:auto;
      z-index:20;
      font-size:14px;
      opacity:0;
      transition:opacity .5s ease;
    }
    footer.visible{ opacity:1; }
    footer span { color:var(--cyan); text-shadow: 0 0 1px var(--cyan); }

    /* YouTube button with larger play triangle (previous design) */
    .youtube-btn {
      background:var(--yt-red);
      border:none;
      padding:6px 10px;
      border-radius:10px;
      display:inline-flex;
      align-items:center;
      gap:10px;
      cursor:pointer;
      box-shadow: 0 0 26px rgba(255,0,0,0.38), 0 0 80px rgba(255,0,0,0.18);
      transition:transform .18s ease, box-shadow .18s ease;
    }
    .youtube-btn:hover{
      transform:scale(1.07);
      box-shadow: 0 0 40px rgba(255,0,0,0.65), 0 0 120px rgba(255,0,0,0.28);
    }

    /* large play triangle */
    .yt-icon {
      width:64px;
      height:42px;
      background:var(--yt-red);
      border-radius:9px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      box-shadow: 0 0 30px rgba(255,0,0,0.38);
      flex: none;
    }
    .yt-icon svg { width:34px; height:34px; }

    @media (max-width:600px){
      #title{ font-size:2.2rem; top:18px; left:18px; }
      .yt-icon { width:48px; height:32px; }
      #introText { font-size:0.95rem; padding: 0 6px; }
      #getStarted { padding:10px 26px; font-size:0.95rem; }
      footer { font-size:13px; gap:8px; }
    }
  </style>
</head>
<body>
  <div class="wrapper">
    <!-- Title -->
    <div id="title" aria-hidden="true">Avyav Chess</div>

    <!-- Center area: intro text (typing) above Get Started -->
    <div class="center-area" role="main" aria-live="polite">
      <div id="introText" aria-atomic="true"></div>
      <button id="getStarted" aria-label="Get Started">Get Started</button>
    </div>

    <!-- Coming section (after click) -->
    <div id="coming">Contents are coming soon</div>
  </div>

  <!-- Footer with subscribe -->
  <footer id="footer" aria-hidden="true">
    <span>Subscribe to my YouTube channel</span>
    <button class="youtube-btn" id="youtubeBtn" title="Subscribe on YouTube" aria-label="YouTube"
      onclick="window.open('https://www.youtube.com/@AvyavChessYT','_blank')">
      <div class="yt-icon" aria-hidden="true">
        <!-- larger white triangle play icon -->
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <path fill="#FFFFFF" d="M8 5v14l11-7z"></path>
        </svg>
      </div>
    </button>
  </footer>

  <!-- User-supplied audio files (must be same folder) -->
  <audio id="buttonClick" src="buttonclick.mp3" preload="auto"></audio>
  <audio id="typingSound" src="typingsound.mp3" preload="auto"></audio>

  <script>
    // Elements
    const title = document.getElementById('title');
    const introTextEl = document.getElementById('introText');
    const getStartedBtn = document.getElementById('getStarted');
    const footer = document.getElementById('footer');
    const coming = document.getElementById('coming');

    const buttonClick = document.getElementById('buttonClick');
    const typingSound = document.getElementById('typingSound');

    // The exact intro line
    const introLine = "Hi, I am Avyav Namdev, welcome to my chess website. I am an advanced player with rating higher than 2100 in chess.com, I created this website for the love of chess.";

    // Timing constants (aligned with CSS)
    const TITLE_FINISH_MS = 3400;               // when title move animation is done
    const TYPING_START_DELAY_AFTER_TITLE = 250; // small pause
    const TYPING_CHAR_MS = 36;                  // typing speed
    const POST_TYPING_BUTTON_DELAY = 220;       // show button after typing

    // Initially hide button & footer
    getStartedBtn.classList.remove('show');
    footer.classList.remove('visible');

    // Try to start typing-sound (autoplay may be blocked)
    // We'll attempt to play typingSound in loop; if rejected, typing still runs but silent.
    function tryStartTypingSound(){
      if(!typingSound) return Promise.reject();
      typingSound.loop = true;
      typingSound.volume = 0.9;
      typingSound.currentTime = 0;
      return typingSound.play();
    }
    function stopTypingSound(){
      try{
        if(typingSound){
          typingSound.pause();
          typingSound.currentTime = 0;
          typingSound.loop = false;
        }
      }catch(e){}
    }

    // Typing routine: visual typing always runs. The typingSound plays if autoplay allowed.
    function typeIntroText(text, onComplete){
      introTextEl.textContent = "";
      introTextEl.classList.remove('done');
      introTextEl.classList.add('visible');

      // Try to play the typingSound (may be blocked)
      let soundAllowed = false;
      tryStartTypingSound().then(()=>{ soundAllowed = true; }).catch(()=>{ soundAllowed = false; });

      let i = 0;
      const charInterval = setInterval(() => {
        if(i < text.length){
          introTextEl.textContent += text[i];

          // if the file couldn't loop (blocked), we attempt per-character clone sound as fallback
          if(!soundAllowed && typingSound && typingSound.paused){
            const clone = typingSound.cloneNode();
            clone.volume = 0.18;
            clone.play().catch(()=>{/*ignore*/});
          }
          i++;
        } else {
          clearInterval(charInterval);
          stopTypingSound();
          introTextEl.classList.add('done'); // remove caret
          if(typeof onComplete === 'function') onComplete();
        }
      }, TYPING_CHAR_MS);
    }

    // Start sequence: after title moves, start typing, then show button and footer when typing done
    setTimeout(() => {
      setTimeout(() => {
        typeIntroText(introLine, () => {
          // after typing completes, show Get Started button
          setTimeout(() => {
            getStartedBtn.classList.add('show');
            // show footer when button appears and keep it visible
            footer.classList.add('visible');
          }, POST_TYPING_BUTTON_DELAY);
        });
      }, TYPING_START_DELAY_AFTER_TITLE);
    }, TITLE_FINISH_MS);

    // Get Started click: play click sound and show coming page
    getStartedBtn.addEventListener('click', () => {
      if(buttonClick){
        buttonClick.currentTime = 0;
        buttonClick.play().catch(()=>{/* ignore play-policy errors */});
      }
      // hide intro center area and show coming
      document.querySelector('.center-area').style.display = 'none';
      coming.style.display = 'block';
      // footer remains visible (already visible)
      footer.classList.add('visible');
    });

    // Accessibility: Enter/Space to press button
    getStartedBtn.addEventListener('keydown', (e) => {
      if(e.key === 'Enter' || e.key === ' '){
        e.preventDefault();
        getStartedBtn.click();
      }
    });

    /* IMPORTANT:
       Browser autoplay policy can prevent audio from starting before a user gesture.
       If you find typing audio silent, clicking anywhere (or tapping) before the typing
       begins will allow audio playback in many browsers. This is a browser security rule,
       not a code bug.
    */
  </script>
</body>
</html>
