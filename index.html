<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Avyav Chess</title>

  <!-- Orbitron font (your preferred font) -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --cyan: #00ccff;
      --cyan-strong: #00e6ff;
      --bg: #000000;
      --yt-red: #FF0000;
    }

    * { box-sizing: border-box; }
    html,body{
      height:100%;
      margin:0;
      background:var(--bg);
      font-family:'Orbitron', sans-serif;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      color:var(--cyan);
    }

    /* wrapper keeps footer from overlapping */
    .wrapper{
      min-height:100%;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      position:relative;
      padding-bottom:70px; /* room for footer */
    }

    /* Title in center then moves to top-left */
    #title {
      position:absolute;
      top:50%;
      left:50%;
      transform:translate(-50%,-50%);
      font-size:4rem;
      color:var(--cyan);
      /* sharp inner glow */
      text-shadow: 0 0 1px var(--cyan), 0 0 2px var(--cyan), 0 0 4px var(--cyan-strong);
      opacity:0;
      animation: titleFadeIn 1.6s ease forwards, titleMove 2s ease 1.8s forwards;
      will-change: transform, top, left, font-size;
      z-index:5;
      white-space:nowrap;
    }

    @keyframes titleFadeIn {
      from{opacity:0;}
      to{opacity:1;}
    }

    @keyframes titleMove {
      from{ top:50%; left:50%; transform:translate(-50%,-50%); font-size:4rem; }
      to{ top:22px; left:28px; transform:translate(0,0); font-size:1.6rem; }
    }

    /* center column for intro text + button */
    .center-area{
      width:100%;
      max-width:900px;
      padding: 0 20px;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap:18px;
      pointer-events:none;
      margin-top:40px; /* so it sits below moved title visually on large screens */
    }

    /* Intro typing text: above button */
    #introText {
      color:var(--cyan);
      font-size:1.05rem;
      line-height:1.45;
      text-align:center;
      max-width:820px;
      width:100%;
      opacity:0;
      white-space:pre-wrap;
      border-right: 2px solid var(--cyan);
      padding-right:6px;
      box-sizing:border-box;
      transition:opacity .35s ease;
      pointer-events:auto;
      /* make glow sharp and subtle */
      text-shadow: 0 0 1px var(--cyan), 0 0 2px var(--cyan-strong);
    }

    #introText.visible { opacity:1; }

    /* Remove caret once done */
    #introText.done { border-right: none; }

    /* Get Started button - hidden until typing done */
    #getStarted {
      pointer-events:auto;
      opacity:0;
      transform:translateY(8px);
      transition: all .35s ease;
      border:2px solid var(--cyan);
      background:transparent;
      color:var(--cyan);
      padding:12px 36px;
      font-size:1rem;
      border-radius:8px;
      cursor:pointer;
      text-shadow: 0 0 2px var(--cyan);
      box-shadow: inset 0 0 6px rgba(0,204,255,0.12), 0 0 6px rgba(0,204,255,0.06);
    }

    #getStarted.show {
      opacity:1;
      transform:translateY(0);
    }

    #getStarted:hover{
      background:var(--cyan);
      color:#000;
      box-shadow: 0 0 18px var(--cyan), 0 0 36px rgba(0,204,255,0.25);
      transform:scale(1.03);
    }

    /* Coming soon section */
    #coming {
      display:none;
      color:var(--cyan);
      text-align:center;
      padding-top:110px;
      font-size:1.6rem;
    }

    /* Footer with YouTube subscribe */
    footer{
      position:fixed;
      bottom:10px;
      left:0;
      width:100%;
      display:flex;
      justify-content:center;
      align-items:center;
      gap:10px;
      pointer-events:auto;
      z-index:20;
      font-size:14px;
      opacity:0;
      transition:opacity .5s ease;
    }

    footer.visible{ opacity:1; }

    footer span { color:var(--cyan); text-shadow: 0 0 2px var(--cyan); }

    /* YouTube button with larger play triangle like before */
    .youtube-btn {
      background:var(--yt-red);
      border:none;
      padding:6px 8px;
      border-radius:10px;
      display:inline-flex;
      align-items:center;
      gap:8px;
      cursor:pointer;
      box-shadow: 0 0 22px rgba(255,0,0,0.36), 0 0 60px rgba(255,0,0,0.18);
      transition:transform .18s ease, box-shadow .18s ease;
    }

    .youtube-btn:hover{
      transform:scale(1.07);
      box-shadow: 0 0 36px rgba(255,0,0,0.6), 0 0 90px rgba(255,0,0,0.28);
    }

    /* big play triangle inside - kept large */
    .yt-icon {
      width:56px;
      height:36px;
      background:var(--yt-red);
      border-radius:8px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      box-shadow: 0 0 20px rgba(255,0,0,0.34);
      flex: none;
    }
    .yt-icon svg { width:28px; height:28px; }

    @media (max-width:600px){
      #title{ font-size:2.2rem; top:18px; left:18px; }
      .yt-icon { width:44px; height:30px; }
      #introText { font-size:0.95rem; padding: 0 6px; }
      #getStarted { padding:10px 26px; font-size:0.95rem; }
      footer { font-size:13px; gap:8px; }
    }
  </style>
</head>
<body>
  <div class="wrapper">
    <!-- Title -->
    <div id="title" aria-hidden="true">Avyav Chess</div>

    <!-- Center area: intro text (typing) above Get Started -->
    <div class="center-area" role="main" aria-live="polite">
      <div id="introText" aria-atomic="true"></div>
      <button id="getStarted" aria-label="Get Started">Get Started</button>
    </div>

    <!-- Coming section (after click) -->
    <div id="coming">Contents are coming soon</div>
  </div>

  <!-- Footer with subscribe -->
  <footer id="footer">
    <span>Subscribe to my YouTube channel</span>
    <button class="youtube-btn" id="youtubeBtn" title="Subscribe on YouTube" aria-label="YouTube"
      onclick="window.open('https://www.youtube.com/@AvyavChessYT','_blank')">
      <div class="yt-icon" aria-hidden="true">
        <!-- Larger white triangle play icon -->
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <path fill="#FFFFFF" d="M8 5v14l11-7z"></path>
        </svg>
      </div>
    </button>
  </footer>

  <!-- User-supplied audio files (must be in same folder) -->
  <audio id="buttonClick" src="buttonclick.mp3" preload="auto"></audio>
  <audio id="typingSound" src="typingsound.mp3" preload="auto"></audio>

  <script>
    // Elements
    const title = document.getElementById('title');
    const introTextEl = document.getElementById('introText');
    const getStartedBtn = document.getElementById('getStarted');
    const footer = document.getElementById('footer');
    const coming = document.getElementById('coming');

    const buttonClick = document.getElementById('buttonClick');
    const typingSound = document.getElementById('typingSound');

    // The exact intro line you gave
    const introLine = "Hi, I am Avyav Namdev, welcome to my chess website. I am an advanced player with rating higher than 2100 in chess.com, I created this website for the love of chess.";

    // Timings aligned with CSS title animations:
    // Title Move animation finishes at ~ (1.6s + 1.8s) = 3.4s from load start.
    const TITLE_FINISH_MS = 3400;
    const TYPING_START_DELAY_AFTER_TITLE = 250; // short pause before typing
    const TYPING_CHAR_MS = 36; // typing speed per char
    const POST_TYPING_BUTTON_DELAY = 220; // short pause before showing button

    // Initially hide button & footer
    getStartedBtn.classList.remove('show');
    footer.classList.remove('visible');

    // Helper: attempt to play typing audio; if browser blocks (autoplay), clicking Get Started will resume audio context for future audio
    function playTypingSoundLoop(){
      if(!typingSound) return;
      // rewind and play loop
      typingSound.currentTime = 0;
      typingSound.loop = true;
      typingSound.volume = 0.9;
      typingSound.play().catch(e => {
        // autoplay blocked; we'll still try to play per-character short sound fallback using cloning during typing
        typingSound.loop = false;
      });
    }
    function stopTypingSound(){
      if(!typingSound) return;
      try{
        typingSound.pause();
        typingSound.currentTime = 0;
      }catch(e){}
    }

    // Typing animation routine (plays user-provided typingsound.mp3 while typing)
    function typeIntroText(text, onComplete){
      introTextEl.textContent = "";
      introTextEl.classList.remove('done');
      introTextEl.classList.add('visible');

      // Start the typing sound loop (attempt)
      playTypingSoundLoop();

      let i = 0;
      // We'll also attempt to play a short per-character tick by cloning the typingSound if loop blocked
      const charInterval = setInterval(() => {
        if(i < text.length){
          introTextEl.textContent += text[i];
          // if typingSound loop couldn't start due to autoplay block, try short one-shot clones for consonants
          if(typingSound && typingSound.paused){
            // clone and play a trimmed small volume sound per char
            const clone = typingSound.cloneNode();
            clone.volume = 0.18;
            clone.currentTime = 0;
            clone.play().catch(()=>{/*ignore*/});
          }
          i++;
        } else {
          clearInterval(charInterval);
          stopTypingSound();
          introTextEl.classList.add('done'); // remove caret
          if(onComplete) onComplete();
        }
      }, TYPING_CHAR_MS);
    }

    // After title moves, start typing
    setTimeout(() => {
      // show footer as soon as intro flow starts
      footer.classList.add('visible');

      // small pause then start typing
      setTimeout(() => {
        typeIntroText(introLine, () => {
          // on typing complete -> show Get Started button
          setTimeout(() => {
            getStartedBtn.classList.add('show');
          }, POST_TYPING_BUTTON_DELAY);
        });
      }, TYPING_START_DELAY_AFTER_TITLE);

    }, TITLE_FINISH_MS);

    // Get Started click: play click sound and show coming page
    getStartedBtn.addEventListener('click', () => {
      // try playing provided click sound
      if(buttonClick){
        buttonClick.currentTime = 0;
        buttonClick.play().catch(()=>{/*ignore autoplay policy errors*/});
      }
      // Hide intro content and show coming section
      document.querySelector('.center-area').style.display = 'none';
      coming.style.display = 'block';
      // footer stays visible
      footer.classList.add('visible');
    });

    // Accessibility: Enter/Space to press button
    getStartedBtn.addEventListener('keydown', (e) => {
      if(e.key === 'Enter' || e.key === ' '){
        e.preventDefault();
        getStartedBtn.click();
      }
    });

    // Ensure audio resume on first user gesture (some browsers block autoplay)
    function resumeAudioOnUserGesture(){
      // try to resume typingSound and buttonClick if suspended
      try{
        if(typingSound && typingSound.paused === false){
          // ok
        } else {
          // if we find user clicked, we can attempt to play a tiny silent sound to allow future playback
          const p = typingSound.play();
          if(p) p.catch(()=>{/*ignore*/});
        }
      }catch(e){}
      // remove listeners
      window.removeEventListener('click', resumeAudioOnUserGesture);
      window.removeEventListener('keydown', resumeAudioOnUserGesture);
    }
    window.addEventListener('click', resumeAudioOnUserGesture);
    window.addEventListener('keydown', resumeAudioOnUserGesture);
  </script>
</body>
</html>
