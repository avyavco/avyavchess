<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Avyav Chess</title>

<!-- Orbitron font -->
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">

<style>
  /* --- Prevent flash: hide before JS initializes --- */
  html,body { height:100%; }
  body { visibility: hidden; margin:0; font-family:'Orbitron',sans-serif; background:#000; color:#00ccff; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; }

  * { box-sizing: border-box; }

  /* persistent title (center -> top-left) */
  #mainTitle {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%,-50%);
    font-size: 3.2rem;
    color: #00ccff;
    text-shadow: 0 0 1px #00ccff;
    z-index: 100;
    will-change: top, left, transform, font-size;
  }

  @keyframes titleSlide {
    from {
      top: 50%; left: 50%; transform: translate(-50%,-50%); font-size:3.2rem;
    }
    to {
      top: 18px; left: 22px; transform: translate(0,0); font-size:1.45rem;
    }
  }

  #mainTitle.slid { animation: titleSlide 900ms ease forwards; }

  /* Generic full-screen centered screen */
  .screen {
    position: fixed;
    top:0; left:0; right:0; bottom:0;
    display: none; /* shown by JS at the right time */
    align-items: center;
    justify-content: center;
    flex-direction: column;
    text-align: center;
    z-index: 10;
    padding: 18px;
  }

  /* Intro screen */
  #introScreen { gap:18px; }
  #introText {
    max-width: 880px;
    width: 92%;
    font-size: 1.05rem;
    line-height: 1.45;
    white-space: pre-wrap;
    text-align: center;
    border-right: 2px solid #00ccff; /* caret */
    padding-right: 6px;
    opacity: 0;
    transition: opacity .2s ease;
  }
  #introText.visible { opacity: 1; }
  #introText.done { border-right: none; }

  #getStarted {
    margin-top: 8px;
    padding: 12px 34px;
    border-radius: 8px;
    font-size: 1rem;
    color: #00ccff;
    background: transparent;
    border: 2px solid #00ccff;
    cursor: pointer;
    display: none;
  }
  #getStarted:hover { background:#00ccff; color:#000; }

  /* Home screen */
  #homeScreen { gap: 18px; }
  .homeButtons { display:flex; flex-direction:column; gap:14px; align-items:center; }
  .homeBtn {
    padding:14px 36px; border-radius:8px; border:2px solid #00ccff; background:transparent; color:#00ccff; font-size:1.05rem; cursor:pointer;
  }
  .homeBtn:hover { background:#00ccff; color:#000; transform:scale(1.02); transition:all .18s ease; }

  /* content screens */
  .contentPage { gap:16px; }

  /* top-right home icon */
  .homeIcon {
    position: fixed;
    top: 12px;
    right: 12px;
    width:44px; height:44px;
    background:#00ccff;
    border-radius:8px;
    z-index:120;
    cursor:pointer;
    display:none; /* shown by JS where needed */
  }
  .homeIcon::after{
    content:'';
    display:block;
    width:100%; height:100%;
    background: center / contain no-repeat url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24"><path fill="%23000" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>');
    mix-blend-mode:multiply;
  }

  /* footer (persistent, but hidden until ready) */
  footer {
    position: fixed;
    bottom: 10px; left:0; right:0;
    display:flex; justify-content:center; gap:10px; align-items:center;
    color:#00ccff; font-size:14px; z-index:120;
    display:none; /* shown by JS when appropriate */
  }
  .ytBox { width:58px; height:38px; background:#FF0000; border-radius:10px; display:flex; align-items:center; justify-content:center; box-shadow:0 0 28px rgba(255,0,0,0.35); }
  .ytBox svg{ width:32px; height:32px; }

  /* small screens */
  @media (max-width:600px) {
    #mainTitle { font-size:2rem; top:18px; left:18px; }
    #introText { font-size:0.95rem; width:94%; }
    .homeBtn { padding:10px 22px; font-size:0.95rem; }
    .ytBox { width:48px; height:30px }
  }
</style>
</head>
<body>

  <!-- Persistent title -->
  <div id="mainTitle" aria-hidden="true">Avyav Chess</div>

  <!-- Intro screen -->
  <div id="introScreen" class="screen" aria-live="polite" aria-label="Intro">
    <div id="introText" aria-atomic="true"></div>
    <button id="getStarted" aria-label="Get Started">Get Started</button>
  </div>

  <!-- Home screen -->
  <div id="homeScreen" class="screen">
    <div class="homeButtons" role="navigation" aria-label="Home options">
      <button class="homeBtn" id="btnPlay">Play Chess with Bot</button>
      <button class="homeBtn" id="btnLearn">Learn Chess</button>
      <button class="homeBtn" id="btnVideos">Videos</button>
      <button class="homeBtn" id="btnContact">Contact Us for Feedback</button>
    </div>
  </div>

  <!-- Content pages -->
  <div id="botPage" class="screen contentPage">
    <h2>Contents Coming Soon...</h2>
  </div>
  <div id="learnPage" class="screen contentPage">
    <h2>Contents Coming Soon...</h2>
  </div>
  <div id="videosPage" class="screen contentPage">
    <h2>Contents Coming Soon...</h2>
  </div>
  <div id="contactPage" class="screen contentPage">
    <h2>Contents Coming Soon...</h2>
  </div>

  <!-- Home icon (top-right) - reused across pages -->
  <div id="homeIcon" class="homeIcon" title="Home"></div>

  <!-- Footer / YouTube -->
  <footer id="footer">
    <div class="ytBtn" onclick="window.open('https://www.youtube.com/@AvyavChessYT','_blank')" role="link" aria-label="Subscribe to YouTube">
      <div class="ytBox" aria-hidden="true">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M10 8v8l6-4z"/></svg>
      </div>
      <div>Subscribe to my YouTube channel</div>
    </div>
  </footer>

  <!-- audio -->
  <audio id="typingSound" src="typingsound.mp3" preload="auto"></audio>
  <audio id="buttonClick" src="buttonclick.mp3" preload="auto"></audio>

<script>
/* ---------- Robust initialization to avoid flicker / misalignment ----------
   - Hide all screens until window 'load' event.
   - Then reveal body and start the animation sequence.
   - This prevents CSS/JS race issues and unstyled content flash.
--------------------------------------------------------------------------*/

window.addEventListener('load', () => {
  // Reveal the page now styles are loaded
  document.body.style.visibility = 'visible';

  // DOM refs
  const mainTitle = document.getElementById('mainTitle');
  const introScreen = document.getElementById('introScreen');
  const introTextEl = document.getElementById('introText');
  const getStarted = document.getElementById('getStarted');
  const footer = document.getElementById('footer');
  const homeIcon = document.getElementById('homeIcon');
  const typingSound = document.getElementById('typingSound');
  const buttonClick = document.getElementById('buttonClick');

  const homeScreen = document.getElementById('homeScreen');
  const botPage = document.getElementById('botPage');
  const learnPage = document.getElementById('learnPage');
  const videosPage = document.getElementById('videosPage');
  const contactPage = document.getElementById('contactPage');

  const btnPlay = document.getElementById('btnPlay');
  const btnLearn = document.getElementById('btnLearn');
  const btnVideos = document.getElementById('btnVideos');
  const btnContact = document.getElementById('btnContact');

  const introLine = "Hi, I am Avyav Namdev, welcome to my chess website. I am an advanced player with rating higher than 2100 in chess.com, I created this website for the love of chess.";

  /* Utility: hide all app screens */
  function hideAllScreens(){
    [introScreen, homeScreen, botPage, learnPage, videosPage, contactPage].forEach(s => s.style.display = 'none');
    homeIcon.style.display = 'none';
    footer.style.display = 'none';
  }

  hideAllScreens(); // ensure clean start

  // Show the main title briefly in center (already in DOM)
  mainTitle.style.opacity = '1';

  // Start title slide after a short pause (so user sees it center)
  setTimeout(()=> {
    // Add the CSS class that runs the keyframe to slide title to top-left
    mainTitle.classList.add('slid');
  }, 500);

  // When titleSlide animation ends, start intro flow
  mainTitle.addEventListener('animationend', (ev) => {
    if (ev.animationName === 'titleSlide') {
      // show intro screen
      introScreen.style.display = 'flex';
      // start typing sequence
      startTypingSequence();
    }
  }, { once: true });

  // Typing routine with attempts to play typing audio.
  function startTypingSequence(){
    introTextEl.textContent = '';
    introTextEl.classList.add('visible');

    // Try to start looping typing sound (autoplay may be blocked)
    try {
      typingSound.loop = true;
      typingSound.currentTime = 0;
      typingSound.play().catch(()=>{ /* autoplay blocked */ });
    } catch(e){ /* ignore */ }

    let i = 0;
    const charMs = 36;
    const t = setInterval(() => {
      if (i < introLine.length) {
        introTextEl.textContent += introLine[i];
        // fallback per-char clone if main loop blocked
        if (typingSound && typingSound.paused) {
          const clone = typingSound.cloneNode();
          clone.volume = 0.18;
          clone.play().catch(()=>{});
        }
        i++;
      } else {
        clearInterval(t);
        // stop audio safely
        try { typingSound.pause(); typingSound.currentTime = 0; } catch(e){}
        introTextEl.classList.add('done');
        // reveal Get Started after short delay
        setTimeout(()=> {
          getStarted.style.display = 'inline-block';
          // reveal footer after button appears
          setTimeout(()=> footer.style.display = 'flex', 380);
        }, 260);
      }
    }, charMs);
  }

  // Get Started click -> show home screen
  getStarted.addEventListener('click', () => {
    try { buttonClick.currentTime = 0; buttonClick.play().catch(()=>{}); } catch(e){}
    hideAllScreens();
    homeScreen.style.display = 'flex';
    homeIcon.style.display = 'block';
    footer.style.display = 'flex';
  });

  // Navigation helpers
  function showHome(){
    hideAllScreens();
    homeScreen.style.display = 'flex';
    homeIcon.style.display = 'block';
    footer.style.display = 'flex';
  }
  function showContent(pageEl){
    hideAllScreens();
    pageEl.style.display = 'flex';
    homeIcon.style.display = 'block';
    footer.style.display = 'flex';
  }

  // top-right Home icon returns to home
  homeIcon.addEventListener('click', () => {
    try { buttonClick.currentTime = 0; buttonClick.play().catch(()=>{}); } catch(e){}
    showHome();
  });

  // Hook home screen buttons to content pages
  btnPlay.addEventListener('click', () => { try { buttonClick.currentTime=0; buttonClick.play().catch(()=>{}); } catch(e){}; showContent(botPage); });
  btnLearn.addEventListener('click', () => { try { buttonClick.currentTime=0; buttonClick.play().catch(()=>{}); } catch(e){}; showContent(learnPage); });
  btnVideos.addEventListener('click', () => { try { buttonClick.currentTime=0; buttonClick.play().catch(()=>{}); } catch(e){}; showContent(videosPage); });
  btnContact.addEventListener('click', () => { try { buttonClick.currentTime=0; buttonClick.play().catch(()=>{}); } catch(e){}; showContent(contactPage); });

  // Accessibility: space/enter on any .homeBtn triggers click
  [btnPlay, btnLearn, btnVideos, btnContact].forEach(b => {
    b.addEventListener('keydown', (e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); b.click(); } });
  });

  // If user refreshes or returns, ensure title is at center briefly and then animate — handled above.
  // Done initialization.

}); // end load listener
</script>
</body>
</html>
